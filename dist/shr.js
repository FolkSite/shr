!function(t){"use strict";function e(t){return void 0===t||null===t||!t.length}function n(t){var e=/\./.test(1.1.toLocaleString())?".":",",n=new RegExp("\\"+e+"\\d+$");return Math.round(t).toLocaleString().replace(n,"")}function o(t,e,n,r){var i=e.split(" ");if(t instanceof NodeList)for(var a=0;a<t.length;a++)t[a]instanceof Node&&o(t[a],arguments[1],arguments[2],arguments[3]);else for(var c=0;c<i.length;c++)t[r?"addEventListener":"removeEventListener"](i[c],n,!1)}function r(t,e,n){t&&o(t,e,n,!0)}function i(t,e){for(var n in e)e[n]&&e[n].constructor&&e[n].constructor===Object?(t[n]=t[n]||{},i(t[n],e[n])):t[n]=e[n];return t}function a(t,e){if(e.network in v.popup){t.preventDefault();var n=v.popup[e.network],o=e.link.href,r=n.width,i=n.height,a="window-"+e.network;if(window[a]&&!window[a].closed)window[a].focus();else{var c=void 0!==window.screenLeft?window.screenLeft:screen.left,u=void 0!==window.screenTop?window.screenTop:screen.top,l=screen.width/2-r/2+c,s=screen.height/2-i/2+u;window[a]=window.open(o,e.network,"top="+s+",left="+l+",width="+r+",height="+i),window[a].focus()}window[a].opener=null}}function c(t,e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function u(t,e){var n="jsonp_callback_"+Math.round(1e5*Math.random());window[n]=function(t){delete window[n],document.body.removeChild(o),e(t)};var o=document.createElement("script");o.setAttribute("src",t+(t.indexOf("?")>=0?"&":"?")+"callback="+n),document.body.appendChild(o)}function l(){v.storage.enabled&&v.storage.key in window.localStorage&&(b={data:JSON.parse(window.localStorage[v.storage.key]),ttl:window.localStorage[v.storage.key+"_ttl"]})}function s(t){v.storage.enabled&&(window.localStorage[v.storage.key]=JSON.stringify(t),window.localStorage[v.storage.key+"_ttl"]=Date.now()+v.storage.ttl)}function d(t){switch(t.network){case"facebook":return c(t.link.search,"u");case"github":return t.link.pathname;default:return c(t.link.search,"url")}}function w(t){if(t.network in v.urls)switch(t.network){case"github":return v.urls[t.network](d(t),v.tokens.github);default:return v.urls[t.network](encodeURIComponent(t.url))}return null}function f(t,n){var o=w(t);if(!e(o)&&v.storage.enabled){var r=d(t);if(r in b.data&&t.network in b.data[r]&&b.ttl>Date.now())return void n.call(null,b.data[r][t.network])}e(o)||u(o,function(e){v.storage.enabled&&(r in b.data||(b.data[r]={}),b.data[r][t.network]=e,s(b.data)),n.call(null,e)})}function h(t,e){return t in v.count.prefix?e[v.count.prefix[t]]:e}function p(t){return t=Number(t),isNaN(t)?0:t}function g(t,o,r){o=h(t.network,o);var i=0,a=t.link.getAttribute("data-shr-display");switch(t.network){case"facebook":o=o.share}if(i=e(a)?t.network in v.count.value?o[v.count.value[t.network]]:o.count:o[a],i=p(i),t.count=i,r&&(t.display&&(i=p(t.display.innerText)),i++),i>0||v.count.displayZero){v.count.position=v.count.position.toLowerCase();var c,u="after"===v.count.position;c=v.count.format&&t.count>1e6?Math.round(i/1e6)+"M":v.count.format&&t.count>1e3?Math.round(i/1e3)+"K":n(i),t.display?t.display.textContent=c:(t.link.insertAdjacentHTML(u?"afterend":"beforebegin",v.count.html(c,v.count.classname,v.count.position)),t.display=t.link[u?"nextSibling":"previousSibling"])}}function k(t){var e=this;return void 0===t?(S("No share link found."),!1):(e.link=t,e.network=t.getAttribute("data-shr-network"),e.url=d(e),f(e,function(t){g(e,t)}),r(e.link,"click",function(t){a(t,e),f(e,function(t){g(e,t,!0)},v.count.increment)}),e)}var v,b={data:{},ttl:0},m={selector:"[data-shr-network]",count:{classname:"share-count",displayZero:!1,format:!0,position:"after",increment:!0,html:function(t,e,n){return'<span class="'+e+" "+e+"--"+n+'">'+t+"</span>"},value:{facebook:"share_count",github:"stargazers_count"},prefix:{github:"data"}},urls:{facebook:function(t){return"https://graph.facebook.com/?id="+t},pinterest:function(t){return"https://widgets.pinterest.com/v1/urls/count.json?url="+t},github:function(t,e){return"https://api.github.com/repos"+t+("string"==typeof e?"?access_token="+e:"")}},popup:{google:{width:500,height:500},facebook:{width:640,height:270},twitter:{width:640,height:240},pinterest:{width:750,height:550}},storage:{key:"shr",enabled:function(){try{var t="___test";return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){return!1}}(),ttl:3e5},tokens:{}},y=function(){},S=function(){};t.setup=function(t,e){"string"==typeof t?t=document.querySelectorAll(t):t instanceof HTMLElement?t=[t]:t instanceof NodeList||(void 0===e&&"object"==typeof t&&(e=t),t=document.querySelectorAll(m.selector)),v=i(m,e),l();for(var n=t.length-1;n>=0;n--){var o=t[n];if(void 0===o.shr){var r=new k(o);o.shr=!!Object.keys(r).length&&r}}v.debug&&window.console&&(y=window.console.log.bind(console),S=window.console.error.bind(console))}}(window.shr=window.shr||{});